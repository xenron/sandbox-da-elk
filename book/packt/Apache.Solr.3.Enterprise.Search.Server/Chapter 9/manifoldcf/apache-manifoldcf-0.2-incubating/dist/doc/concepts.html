<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta content="Apache Forrest" name="Generator">
<meta name="Forrest-version" content="0.9-dev">
<meta name="Forrest-skin-name" content="lucene">
<title>Concepts</title>
<link type="text/css" href="skin/basic.css" rel="stylesheet">
<link media="screen" type="text/css" href="skin/screen.css" rel="stylesheet">
<link media="print" type="text/css" href="skin/print.css" rel="stylesheet">
<link type="text/css" href="skin/profile.css" rel="stylesheet">
<script src="skin/getBlank.js" language="javascript" type="text/javascript"></script><script src="skin/getMenu.js" language="javascript" type="text/javascript"></script><script src="skin/fontsize.js" language="javascript" type="text/javascript"></script>
<link rel="shortcut icon" href="images/favicon.ico">
</head>
<body onload="init()">
<script type="text/javascript">ndeSetTextSize();</script>
<div id="top">
<!--+
    |breadtrail
    +-->
<div class="breadtrail">
<a href="http://www.apache.org/">Apache</a><script src="skin/breadcrumbs.js" language="JavaScript" type="text/javascript"></script>
</div>
<!--+
    |header
    +-->
<div class="header">
<!--+
    |start group logo
    +-->
<div class="grouplogo">
<a href="http://www.apache.org"><img class="logoImage" alt="Apache" src="images/apache_feather.gif" title="Apache Software Foundation"></a>
</div>
<!--+
    |end group logo
    +-->
<!--+
    |start Project Logo
    +-->
<div class="projectlogo">
<a href="http://incubator.apache.org/lcf"><img class="logoImage" alt="Apache ManifoldCF" src="images/ManifoldCF-logo.PNG" title="ManifoldCF"></a>
</div>
<!--+
    |end Project Logo
    +-->
<!--+
    |start Search
    +-->
<div class="searchbox">
<form action="http://www.lucidimagination.com/search/" method="get" class="roundtopsmall">
<input onFocus="getBlank (this, 'Search the site with Solr');" size="25" name="q" id="query" type="text" value="Search the site with Solr">&nbsp; 
                    <input name="Search" value="Search" type="submit">
</form>
<div style="position: relative; top: -5px; left: -10px">Powered by <a href="http://www.lucidimagination.com" style="color: #033268">Lucid Imagination</a>
</div>
</div>
<!--+
    |end search
    +-->
<!--+
    |start Tabs
    +-->
<ul id="tabs">
<li class="current">
<a class="selected" href="index.html">Main</a>
</li>
<li>
<a class="unselected" href="http://cwiki.apache.org/confluence/display/CONNECTORS/Index">Wiki</a>
</li>
</ul>
<!--+
    |end Tabs
    +-->
</div>
</div>
<div id="main">
<div id="publishedStrip">
<!--+
    |start Subtabs
    +-->
<div id="level2tabs"></div>
<!--+
    |end Endtabs
    +-->
<script type="text/javascript"><!--
document.write("Last Published: " + document.lastModified);
//  --></script>
</div>
<!--+
    |breadtrail
    +-->
<div class="breadtrail">

             &nbsp;
           </div>
<!--+
    |start Menu, mainarea
    +-->
<!--+
    |start Menu
    +-->
<div id="menu">
<div onclick="SwitchMenu('menu_1.1', 'skin/')" id="menu_1.1Title" class="menutitle">About</div>
<div id="menu_1.1" class="menuitemgroup">
<div class="menuitem">
<a href="index.html">Welcome</a>
</div>
<div class="menuitem">
<a href="who.html">Who We Are</a>
</div>
<div class="menuitem">
<a href="http://www.cafepress.com/lucene/">Buy Stuff</a>
</div>
<div class="menuitem">
<a href="http://www.apache.org/foundation/sponsorship.html">Sponsor Apache</a>
</div>
<div class="menuitem">
<a href="http://www.apache.org/foundation/thanks.html">Sponsors of Apache</a>
</div>
</div>
<div onclick="SwitchMenu('menu_selected_1.2', 'skin/')" id="menu_selected_1.2Title" class="menutitle" style="background-image: url('skin/images/chapter_open.gif');">Documentation</div>
<div id="menu_selected_1.2" class="selectedmenuitemgroup" style="display: block;">
<div class="menupage">
<div class="menupagetitle">Concepts</div>
</div>
<div class="menuitem">
<a href="included-connectors.html">Compatibility Matrix</a>
</div>
<div class="menuitem">
<a href="faq.html">Frequently Asked Questions</a>
</div>
<div class="menuitem">
<a href="programmatic-operation.html">API Documentation</a>
</div>
<div class="menuitem">
<a href="javadoc.html">Javadoc</a>
</div>
<div class="menuitem">
<a href="how-to-build-and-deploy.html">Building and Deploying</a>
</div>
<div class="menuitem">
<a href="end-user-documentation.html">End-user Documentation (HTML)</a>
</div>
<div class="menuitem">
<a href="end-user-documentation.pdf">End-user Documentation (PDF)</a>
</div>
</div>
<div onclick="SwitchMenu('menu_1.3', 'skin/')" id="menu_1.3Title" class="menutitle">Resources</div>
<div id="menu_1.3" class="menuitemgroup">
<div class="menuitem">
<a href="download.html">Download</a>
</div>
<div class="menuitem">
<a href="mail.html">Mailing Lists</a>
</div>
<div class="menuitem">
<a href="developer-resources.html">Developer/Integrator Resources</a>
</div>
</div>
<div onclick="SwitchMenu('menu_1.4', 'skin/')" id="menu_1.4Title" class="menutitle">Related-Projects</div>
<div id="menu_1.4" class="menuitemgroup">
<div class="menuitem">
<a href="http://incubator.apache.org/droids/">Droids</a>
</div>
<div class="menuitem">
<a href="http://lucene.apache.org/java/">Java</a>
</div>
<div class="menuitem">
<a href="http://incubator.apache.org/lucene.net/">Lucene.Net</a>
</div>
<div class="menuitem">
<a href="http://lucene.apache.org/lucy/">Lucy</a>
</div>
<div class="menuitem">
<a href="http://lucene.apache.org/mahout/">Mahout</a>
</div>
<div class="menuitem">
<a href="http://lucene.apache.org/nutch/">Nutch</a>
</div>
<div class="menuitem">
<a href="http://lucene.apache.org/openrelevance/">Open Relevance</a>
</div>
<div class="menuitem">
<a href="http://lucene.apache.org/pylucene/">PyLucene</a>
</div>
<div class="menuitem">
<a href="http://lucene.apache.org/solr/">Solr</a>
</div>
<div class="menuitem">
<a href="http://lucene.apache.org/tika/">Tika</a>
</div>
</div>
<div id="credit"></div>
<div id="roundbottom">
<img style="display: none" class="corner" height="15" width="15" alt="" src="skin/images/rc-b-l-15-1body-2menu-3menu.png"></div>
<!--+
  |alternative credits
  +-->
<div id="credit2"></div>
</div>
<!--+
    |end Menu
    +-->
<!--+
    |start content
    +-->
<div id="content">
<h1>Concepts</h1>
<div id="minitoc-area">
<ul class="minitoc">
<li>
<a href="#Concepts">Concepts</a>
<ul class="minitoc">
<li>
<a href="#ManifoldCF+document+model">ManifoldCF document model</a>
</li>
<li>
<a href="#ManifoldCF+security+model">ManifoldCF security model</a>
</li>
<li>
<a href="#ManifoldCF+conceptual+entities">ManifoldCF conceptual entities</a>
<ul class="minitoc">
<li>
<a href="#Connectors">Connectors</a>
</li>
<li>
<a href="#Connections">Connections</a>
</li>
<li>
<a href="#Jobs">Jobs</a>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div> 
    
<a name="N1000E"></a><a name="Concepts"></a>
<h2 class="h3">Concepts</h2>
<div class="section">
<p>ManifoldCF is a crawler framework which is designed to meet several key goals.</p>
<p></p>
<ul>
        
<li>It's reliable, and resilient against being shutdown or restarted</li>
        
<li>It's incremental, meaning that jobs describe a set of documents by some criteria, and are meant to be run again and again to pick up any differences</li>
        
<li>It supports connections to multiple kinds of repositories at the same time</li>
        
<li>It defines and fully supports a model of document security, so that each document listed in a search result from the back-end search engine is one that the current user is allowed to see</li>
        
<li>It operates with reasonable efficiency and throughput</li>
        
<li>Its memory usage characteristics are bounded and predictable in advance</li>
      
</ul>
<p></p>
<p>ManifoldCF meets many of its architectural goals by being implemented on top of a relational database.  The current implementation requires Postgresql or uses the included Derby.  Longer term, we may support other DB bindings.</p>
<p></p>
<a name="N10035"></a><a name="ManifoldCF+document+model"></a>
<h3 class="h4">ManifoldCF document model</h3>
<p></p>
<p>Each document in ManifoldCF consists of some opaque binary data, plus some opaque associated metadata (which is described by name-value pairs), and is uniquely addressed by a URI.  The back-end search engines which ManifoldCF communicates with are all expected to support, to a greater or lesser degree, this model.</p>
<p></p>
<p>Documents may also have access tokens associated with them.  These access tokens are described more fully in the next section.</p>
<p></p>
<a name="N10048"></a><a name="ManifoldCF+security+model"></a>
<h3 class="h4">ManifoldCF security model</h3>
<p></p>
<p>The ManifoldCF security model is based loosely on the standard authorization concepts and hierarchies found in Microsoft's Active Directory.  Active Directory is quite common in the kinds of environments where data repositories exist that are ripe for indexing.  Active Directory's authorization model is also easily used in a general way to represent authorization for a huge variety of third-party content repositories.</p>
<p></p>
<p>ManifoldCF defines a concept of an <em>access token</em>.  An access token, to ManifoldCF, is a string which is meaningful only to a specific connector or connectors.  This string describes the ability of a user to view (or not view) some set of documents.  For documents protected by Active Directory itself, an access token would be an Active Directory SID (e.g. "S-1-23-4-1-45").  But, for example, for documents protected by Livelink a wholly different string would be used.</p>
<p></p>
<p>In the ManifoldCF security model, it is the job of an <em>authority</em> to provide a list of access tokens for a given searching user.  Multiple authorities cooperate in that each one can add to the list of access tokens describing a given user's security.  The resulting access tokens are handed to the search engine as part of every search request, so that the search engine may properly exclude documents that the user is not allowed to see.</p>
<p></p>
<p>When document indexing is done, therefore, it is the job of the crawler to hand access tokens to the search engine, so that it may categorize the documents properly according to their accessibility.  Note that the access tokens so provided are meaningful only within the space of the governing authority.  Access tokens can be provided as "grant" tokens, or as "deny" tokens.  Finally, there are multiple levels of tokens, which correspond to Active Directory's concepts of "share" security, "directory" security, or "file" security.  (The latter concepts are rarely used except for documents that come from Windows or Samba systems.)</p>
<p></p>
<p>Once all these documents and their access tokens are handed to the search engine, it is the search engine's job to enforce security by excluding inappropriate documents from the search results.  For Solr 1.5, this infrastructure has been submitted in jira ticket SOLR-1895, found <a href="https://issues.apache.org/jira/browse/SOLR-1895">here</a>, where you can download a SearchComponent plug-in and simple instructions for setting up your copy of Solr to enforce ManifoldCF's model of document security.  Bear in mind that this plug-in is still not a complete solution, as it requires an authenticated user name to be passed to it from some upstream source, possibly a JAAS authenticator within an application server framework.</p>
<p></p>
<a name="N10074"></a><a name="ManifoldCF+conceptual+entities"></a>
<h3 class="h4">ManifoldCF conceptual entities</h3>
<p></p>
<a name="N1007C"></a><a name="Connectors"></a>
<h4>Connectors</h4>
<p></p>
<p>ManifoldCF defines three different kinds of connectors.  These are:</p>
<p></p>
<ul>
            
<li>Authority connectors</li>
            
<li>Repository connectors</li>
            
<li>Output connectors</li>
          
</ul>
<p></p>
<p>All connectors share certain characteristics.  First, they are pooled.  This means that ManifoldCF keeps configured and connected instances of a connector around for a while, and has the ability to limit the total number of such instances to within some upper limit.  Connector implementations have specific methods in them for managing their existence in the pools that ManifoldCF keeps them in.  Second, they are configurable.  The configuration description for a connector is an XML document, whose precise format is determined by the connector implementation.  A configured connector instance is called a <em>connection</em>, by common ManifoldCF convention.</p>
<p></p>
<p>The function of each type of connector is described below.</p>
<p></p>
<table class="ForrestTable" cellspacing="1" cellpadding="4">
            
<tr>
<th colspan="1" rowspan="1">Connector type</th><th colspan="1" rowspan="1">Function</th>
</tr>
            
<tr>
<td colspan="1" rowspan="1">Authority connector</td><td colspan="1" rowspan="1">Furnishes a standard way of mapping a user name to access tokens that are meaningful for a given type of repository</td>
</tr>
            
<tr>
<td colspan="1" rowspan="1">Repository connector</td><td colspan="1" rowspan="1">Fetches documents from a specific kind of repository, such as SharePoint or off the web</td>
</tr>
            
<tr>
<td colspan="1" rowspan="1">Output connector</td><td colspan="1" rowspan="1">Pushes document ingestion requests and deletion requests to a specific kind of back end search engine or other entity, such as Lucene</td>
</tr>
          
</table>
<p></p>
<a name="N100D2"></a><a name="Connections"></a>
<h4>Connections</h4>
<p></p>
<p>As described above, a <em>connection</em> is a connector implementation plus connector-specific configuration information.  A user can define a connection of all three types in the crawler UI.</p>
<p></p>
<p>The kind of information included in the configuration data for a connector typically describes the "how", as opposed to the "what".  For example, you'd configure a LiveLink connection by specifying how to talk to the LiveLink server.  You would <strong>not</strong> include information about which documents to select in such a configuration.</p>
<p></p>
<p>There is one difference between how you define a <em>repository connection</em>, vs. how you would define an <em>authority connection</em> or <em>output connection</em>.  The difference is that you must specify a governing authority connection for your repository connection.  This is because <strong>all</strong> documents ingested by ManifoldCF need to include appropriate access tokens, and those access tokens are specific to the governing authority.</p>
<p></p>
<a name="N100FC"></a><a name="Jobs"></a>
<h4>Jobs</h4>
<p></p>
<p>A <em>job</em> in ManifoldCF parlance is a description of some kind of synchronization that needs to occur between a specified repository connection and a specified output connection.  A job includes the following:</p>
<p></p>
<ul>
            
<li>A verbal description</li>
            
<li>A repository connection (and thus implicitly an authority connection as well)</li>
            
<li>An output connection</li>
            
<li>A repository-connection-specific description of "what" documents and metadata the job applies to</li>
            
<li>A model for crawling: either "run to completion", or "run continuously"</li>
            
<li>A schedule for when the job will run: either within specified time windows, or on demand</li>
          
</ul>
<p></p>
<p>Jobs are allowed to share the same repository connection, and thus they can overlap in the set of documents they describe.  ManifoldCF permits this situation, although when it occurs it is probably an accident.</p>
</div>
  
</div>
<!--+
    |end content
    +-->
<div class="clearboth">&nbsp;</div>
</div>
<div id="footer">
<!--+
    |start bottomstrip
    +-->
<div class="lastmodified">
<script type="text/javascript"><!--
document.write("Last Published: " + document.lastModified);
//  --></script>
</div>
<div class="copyright">
        Copyright &copy;
         2009, 2010 <a href="http://www.apache.org/licenses/">The Apache Software Foundation.</a>
</div>
<!--+
    |end bottomstrip
    +-->
</div>
</body>
</html>
