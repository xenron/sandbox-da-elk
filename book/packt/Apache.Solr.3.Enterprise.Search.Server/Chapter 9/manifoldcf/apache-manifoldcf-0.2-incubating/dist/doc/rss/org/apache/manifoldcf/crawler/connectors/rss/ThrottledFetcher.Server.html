<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.5.0_22) on Tue Apr 26 17:52:10 EDT 2011 -->
<TITLE>
ThrottledFetcher.Server
</TITLE>

<META NAME="keywords" CONTENT="org.apache.manifoldcf.crawler.connectors.rss.ThrottledFetcher.Server class">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../../../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    parent.document.title="ThrottledFetcher.Server";
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../../org/apache/manifoldcf/crawler/connectors/rss/package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../../../org/apache/manifoldcf/crawler/connectors/rss/ThrottledFetcher.DataSession.html" title="class in org.apache.manifoldcf.crawler.connectors.rss"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../../../../org/apache/manifoldcf/crawler/connectors/rss/ThrottledFetcher.ThrottledConnection.html" title="class in org.apache.manifoldcf.crawler.connectors.rss"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../../../index.html?org/apache/manifoldcf/crawler/connectors/rss/ThrottledFetcher.Server.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="ThrottledFetcher.Server.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
org.apache.manifoldcf.crawler.connectors.rss</FONT>
<BR>
Class ThrottledFetcher.Server</H2>
<PRE>
java.lang.Object
  <IMG SRC="../../../../../../resources/inherit.gif" ALT="extended by "><B>org.apache.manifoldcf.crawler.connectors.rss.ThrottledFetcher.Server</B>
</PRE>
<DL>
<DT><B>Enclosing class:</B><DD><A HREF="../../../../../../org/apache/manifoldcf/crawler/connectors/rss/ThrottledFetcher.html" title="class in org.apache.manifoldcf.crawler.connectors.rss">ThrottledFetcher</A></DD>
</DL>
<HR>
<DL>
<DT><PRE>protected class <B>ThrottledFetcher.Server</B><DT>extends java.lang.Object</DL>
</PRE>

<P>
This class represents the throttling stuff kept around for a single server.

 In order to calculate
 the effective "burst" fetches per second and bytes per second, we need to have some idea what the window is.
 For example, a long hiatus from fetching could cause overuse of the server when fetching resumes, if the
 window length is too long.

 One solution to this problem would be to keep a list of the individual fetches as records.  Then, we could
 "expire" a fetch by discarding the old record.  However, this is quite memory consumptive for all but the
 smallest intervals.

 Another, better, solution is to hook into the start and end of individual fetches.  These will, presumably, occur
 at the fastest possible rate without long pauses spent doing something else.  The only complication is that
 fetches may well overlap, so we need to "reference count" the fetches to know when to reset the counters.
 For "fetches per second", we can simply make sure we "schedule" the next fetch at an appropriate time, rather
 than keep records around.  The overall rate may therefore be somewhat less than the specified rate, but that's perfectly
 acceptable.

 For the "maximum open connections" limit, the best thing would be to establish a separate MultiThreadedConnectionPool
 for each Server.  Then, the limit would be automatic.

 Some notes on the algorithms used to limit server bandwidth impact
 ==================================================================

 In a single connection case, the algorithm we'd want to use works like this.  On the first chunk of a series,
 the total length of time and the number of bytes are recorded.  Then, prior to each subsequent chunk, a calculation
 is done which attempts to hit the bandwidth target by the end of the chunk read, using the rate of the first chunk
 access as a way of estimating how long it will take to fetch those next n bytes.

 For a multi-connection case, which this is, it's harder to either come up with a good maximum bandwidth estimate,
 and harder still to "hit the target", because simultaneous fetches will intrude.  The strategy is therefore:

 1) The first chunk of any series should proceed without interference from other connections to the same server.
    The goal here is to get a decent quality estimate without any possibility of overwhelming the server.

 2) The bandwidth of the first chunk is treated as the "maximum bandwidth per connection".  That is, if other
    connections are going on, we can presume that each connection will use at most the bandwidth that the first fetch
    took.  Thus, by generating end-time estimates based on this number, we are actually being conservative and
    using less server bandwidth.

 3) For chunks that have started but not finished, we keep track of their size and estimated elapsed time in order to schedule when
    new chunks from other connections can start.
<P>

<P>
<HR>

<P>
<!-- =========== FIELD SUMMARY =========== -->

<A NAME="field_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Field Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../org/apache/manifoldcf/crawler/connectors/rss/ThrottledFetcher.Server.html#estimateInProgress">estimateInProgress</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Flag indicating whether rate estimation is in progress yet</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../org/apache/manifoldcf/crawler/connectors/rss/ThrottledFetcher.Server.html#estimateValid">estimateValid</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Flag indicating whether a rate estimate is needed</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;java.lang.Integer</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../org/apache/manifoldcf/crawler/connectors/rss/ThrottledFetcher.Server.html#firstChunkLock">firstChunkLock</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This object is used to gate access while the first chunk is being read</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;long</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../org/apache/manifoldcf/crawler/connectors/rss/ThrottledFetcher.Server.html#nextFetchTime">nextFetchTime</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This is the time of the next allowed fetch (in ms since epoch)</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../org/apache/manifoldcf/crawler/connectors/rss/ThrottledFetcher.Server.html#outstandingConnections">outstandingConnections</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Outstanding connection counter</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;double</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../org/apache/manifoldcf/crawler/connectors/rss/ThrottledFetcher.Server.html#rateEstimate">rateEstimate</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The inverse rate estimate of the first fetch, in ms/byte</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../org/apache/manifoldcf/crawler/connectors/rss/ThrottledFetcher.Server.html#refCount">refCount</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Reference count for bandwidth variables</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;long</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../org/apache/manifoldcf/crawler/connectors/rss/ThrottledFetcher.Server.html#seriesStartTime">seriesStartTime</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The start time of this series</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../org/apache/manifoldcf/crawler/connectors/rss/ThrottledFetcher.Server.html#serverName">serverName</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The fqdn of the server</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;long</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../org/apache/manifoldcf/crawler/connectors/rss/ThrottledFetcher.Server.html#totalBytesRead">totalBytesRead</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Total actual bytes read in this series; this includes fetches in progress</TD>
</TR>
</TABLE>
&nbsp;
<!-- ======== CONSTRUCTOR SUMMARY ======== -->

<A NAME="constructor_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Constructor Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="../../../../../../org/apache/manifoldcf/crawler/connectors/rss/ThrottledFetcher.Server.html#ThrottledFetcher.Server(java.lang.String)">ThrottledFetcher.Server</A></B>(java.lang.String&nbsp;serverName)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Constructor</TD>
</TR>
</TABLE>
&nbsp;
<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Method Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../org/apache/manifoldcf/crawler/connectors/rss/ThrottledFetcher.Server.html#beginFetch(long)">beginFetch</A></B>(long&nbsp;minimumMillisecondsPerFetchPerServer)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Note the start of a fetch operation.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../org/apache/manifoldcf/crawler/connectors/rss/ThrottledFetcher.Server.html#beginRead(int, double)">beginRead</A></B>(int&nbsp;byteCount,
          double&nbsp;minimumMillisecondsPerBytePerServer)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Note the start of an individual byte read of a specified size.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../org/apache/manifoldcf/crawler/connectors/rss/ThrottledFetcher.Server.html#discard()">discard</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Discard this server.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../org/apache/manifoldcf/crawler/connectors/rss/ThrottledFetcher.Server.html#endFetch()">endFetch</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Note the end of a fetch operation.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../org/apache/manifoldcf/crawler/connectors/rss/ThrottledFetcher.Server.html#endRead(int, int)">endRead</A></B>(int&nbsp;originalCount,
        int&nbsp;actualCount)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Note the end of an individual read from the server.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../org/apache/manifoldcf/crawler/connectors/rss/ThrottledFetcher.Server.html#getServerName()">getServerName</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Get the fqdn of the server</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../org/apache/manifoldcf/crawler/connectors/rss/ThrottledFetcher.Server.html#registerConnection(int)">registerConnection</A></B>(int&nbsp;maxOutstandingConnections)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Register an outstanding connection (and wait until it can be obtained before proceeding)</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../org/apache/manifoldcf/crawler/connectors/rss/ThrottledFetcher.Server.html#releaseConnection()">releaseConnection</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Release an outstanding connection back into the pool</TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_java.lang.Object"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from class java.lang.Object</B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</CODE></TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ============ FIELD DETAIL =========== -->

<A NAME="field_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Field Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="serverName"><!-- --></A><H3>
serverName</H3>
<PRE>
protected java.lang.String <B>serverName</B></PRE>
<DL>
<DD>The fqdn of the server
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="nextFetchTime"><!-- --></A><H3>
nextFetchTime</H3>
<PRE>
protected long <B>nextFetchTime</B></PRE>
<DL>
<DD>This is the time of the next allowed fetch (in ms since epoch)
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="refCount"><!-- --></A><H3>
refCount</H3>
<PRE>
protected int <B>refCount</B></PRE>
<DL>
<DD>Reference count for bandwidth variables
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="rateEstimate"><!-- --></A><H3>
rateEstimate</H3>
<PRE>
protected double <B>rateEstimate</B></PRE>
<DL>
<DD>The inverse rate estimate of the first fetch, in ms/byte
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="estimateValid"><!-- --></A><H3>
estimateValid</H3>
<PRE>
protected boolean <B>estimateValid</B></PRE>
<DL>
<DD>Flag indicating whether a rate estimate is needed
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="estimateInProgress"><!-- --></A><H3>
estimateInProgress</H3>
<PRE>
protected boolean <B>estimateInProgress</B></PRE>
<DL>
<DD>Flag indicating whether rate estimation is in progress yet
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="seriesStartTime"><!-- --></A><H3>
seriesStartTime</H3>
<PRE>
protected long <B>seriesStartTime</B></PRE>
<DL>
<DD>The start time of this series
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="totalBytesRead"><!-- --></A><H3>
totalBytesRead</H3>
<PRE>
protected long <B>totalBytesRead</B></PRE>
<DL>
<DD>Total actual bytes read in this series; this includes fetches in progress
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="firstChunkLock"><!-- --></A><H3>
firstChunkLock</H3>
<PRE>
protected java.lang.Integer <B>firstChunkLock</B></PRE>
<DL>
<DD>This object is used to gate access while the first chunk is being read
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="outstandingConnections"><!-- --></A><H3>
outstandingConnections</H3>
<PRE>
protected int <B>outstandingConnections</B></PRE>
<DL>
<DD>Outstanding connection counter
<P>
<DL>
</DL>
</DL>

<!-- ========= CONSTRUCTOR DETAIL ======== -->

<A NAME="constructor_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Constructor Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="ThrottledFetcher.Server(java.lang.String)"><!-- --></A><H3>
ThrottledFetcher.Server</H3>
<PRE>
public <B>ThrottledFetcher.Server</B>(java.lang.String&nbsp;serverName)</PRE>
<DL>
<DD>Constructor
<P>
</DL>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Method Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="getServerName()"><!-- --></A><H3>
getServerName</H3>
<PRE>
public java.lang.String <B>getServerName</B>()</PRE>
<DL>
<DD>Get the fqdn of the server
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="registerConnection(int)"><!-- --></A><H3>
registerConnection</H3>
<PRE>
public void <B>registerConnection</B>(int&nbsp;maxOutstandingConnections)
                        throws org.apache.manifoldcf.core.interfaces.ManifoldCFException</PRE>
<DL>
<DD>Register an outstanding connection (and wait until it can be obtained before proceeding)
<P>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE>org.apache.manifoldcf.core.interfaces.ManifoldCFException</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="releaseConnection()"><!-- --></A><H3>
releaseConnection</H3>
<PRE>
public void <B>releaseConnection</B>()</PRE>
<DL>
<DD>Release an outstanding connection back into the pool
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="beginFetch(long)"><!-- --></A><H3>
beginFetch</H3>
<PRE>
public void <B>beginFetch</B>(long&nbsp;minimumMillisecondsPerFetchPerServer)
                throws java.lang.InterruptedException</PRE>
<DL>
<DD>Note the start of a fetch operation.  Call this method just before the actual stream access begins.
 May wait until schedule allows.
<P>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE>java.lang.InterruptedException</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="endFetch()"><!-- --></A><H3>
endFetch</H3>
<PRE>
public void <B>endFetch</B>()</PRE>
<DL>
<DD>Note the end of a fetch operation.  Call this method just after the fetch completes.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="beginRead(int, double)"><!-- --></A><H3>
beginRead</H3>
<PRE>
public void <B>beginRead</B>(int&nbsp;byteCount,
                      double&nbsp;minimumMillisecondsPerBytePerServer)
               throws java.lang.InterruptedException</PRE>
<DL>
<DD>Note the start of an individual byte read of a specified size.  Call this method just before the
 read request takes place.  Performs the necessary delay prior to reading specified number of bytes from the server.
<P>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE>java.lang.InterruptedException</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="endRead(int, int)"><!-- --></A><H3>
endRead</H3>
<PRE>
public void <B>endRead</B>(int&nbsp;originalCount,
                    int&nbsp;actualCount)</PRE>
<DL>
<DD>Note the end of an individual read from the server.  Call this just after an individual read completes.
 Pass the actual number of bytes read to the method.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="discard()"><!-- --></A><H3>
discard</H3>
<PRE>
public void <B>discard</B>()</PRE>
<DL>
<DD>Discard this server.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../../org/apache/manifoldcf/crawler/connectors/rss/package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../../../org/apache/manifoldcf/crawler/connectors/rss/ThrottledFetcher.DataSession.html" title="class in org.apache.manifoldcf.crawler.connectors.rss"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../../../../org/apache/manifoldcf/crawler/connectors/rss/ThrottledFetcher.ThrottledConnection.html" title="class in org.apache.manifoldcf.crawler.connectors.rss"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../../../index.html?org/apache/manifoldcf/crawler/connectors/rss/ThrottledFetcher.Server.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="ThrottledFetcher.Server.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>

</BODY>
</HTML>
